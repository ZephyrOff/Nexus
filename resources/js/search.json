[[{"l":"Introduction","p":["Nexus est un outil qui se veut être un gestionnaire de projet Python complet. L'objectif est de centraliser l'ensemble des besoins d'un développeur Python au même endroit pour faciliter son utilisation et limiter la nécessité d'installer de multiples outils.","A l'instar de Poetry, Nexus se positionne comme un gestionnaire de dépendances et de packaging. Le tout accompagné d'un système d'environnement virtuel pour isoler les différents environnements de travail.","L'outil propose également des outils d'analyse et de mise en conformité de votre code grâce à l'intégration de pylint, bandit et black.","L'implémentation de cx_freeze permet de compiler son code en version portable.","Un système de repository interne et de backup permet de versionner proprement son code et de réaliser les sauvegardes pour réaliser des archives."]}],[{"l":"Sauvegarde","p":["Pour faciliter l'archivage ou la sauvegarde de nos projets, Nexus propose une solution de sauvegarde qui va archiver et compresser dans un zip l'ensemble de notre projet.","La solution va alors récupérer le code du projet, les include_files, la licence, le readme, le changelog et l'ajouter dans une archive."]},{"i":"options","l":"Options:","p":["ou pour configurer la qualité de compression (entre 1 et 9) ou pour définir le nom de l'archive ou pour forcer l'écriture sur le fichier de sortie"]}],[{"l":"Architecture","p":["Nexus propose une architecture équivalente à ce qu'on peut retrouver sur une solution comme Poetry et apporte quelques modifications mineures pour s'adapter au besoin de la solution et des outils utilisés."]}],[{"l":"Concept","p":["Un projet Nexus contient plusieurs éléments:","Un fichier nexus.toml qui contient la configuration du projet","Un fichier README.md","Un fichier LICENSE (si demandé)","Un fichier changelog.md (si demandé)","Le répertoire qui va contenir le code du projet (et le fichier principal demandé lors de la création du projet)"]}],[{"i":"nexustoml","l":"Nexus.toml","p":["Le fichier nexus.toml contient l'ensemble des informations et des paramètres qui seront nécessaire pour le bon fonctionnement de Nexus. Ces paramètres sont regroupés par section pour une meilleure compréhension.","Il est possible de retrouver facilement les informations d'un projet avec la commande project"]},{"l":"Description des sections"},{"l":"Section project","p":["Contient les éléments de base sur la description du projet","name: le nom du projet version: la version actuelle description: la description du projet mainfile: le fichier principal qui sera utilisé pour l'exécution du code ou encore la compilation du projet requires-python: les prérequis de version Python"]},{"i":"section-projectmetadata","l":"Section project.metadata","p":["Contient les métadonnées qui seront utilisées pour rendre notre projet publiable.","authors: Les auteurs du projet (sous forme de liste) maintainers: Les mainteneurs du projet (sous forme de liste) readme: l'emplacement du fichier readme.md (pour la description principale qui sera utilisée) license: le type de licence utilisée license_file: l'emplacement du fichier de licence keywords: les mots-clés qui seront définis pour rechercher le package dans les repo classifiers: même remarque que keywords copyright: pour spécifier d'éventuels copyright changelog: l'emplacement du fichier de changelog"]},{"i":"section-projecturls","l":"Section project.urls","p":["Contient les liens utiles affichés sur les repo","changelog: l'url vers le fichier de changelog homepage: l'url vers la page d'accueil du projet documentation: l'url vers la documentation"]},{"i":"section-projectdependencies","l":"Section project.dependencies","p":["Contient l'ensemble des dépendances du projet avec comme format NOM_PACKAGE = \"VERSION\"","Des sous-sections windows et linux sont possibles pour préciser des dépendances spécifiques au système."]},{"i":"section-projectbuild","l":"Section project.build","p":["Contient les différentes informations qui seront utiles pour la création de package et la compilation.","packages: La liste des packages natif ou à installer nécessaire au projet includes: la liste des modules internes au projet nécessaires excludes: La liste des packages à exclure include_files: La liste des fichiers annexes à intégrer au projet optimize: niveau d'optimisation de la compilation (0 (disabled), 1 or 2) no_compress: booléen qui définit si les dépendances sont dans fichier zip sans compression lors de la compilation GUI: booléen qui définit si le projet a une partie graphique icon: chemin vers le fichier icon qui sera utilisé par l'application compilée"]},{"i":"section-projectwheel","l":"Section project.wheel","p":["Contient les informations spécifiques pour la création de package","platforms: précise la plateforme nécessaire Une sous-sectoin entry_points contient console_scripts qui contient la liste des console_scripts qui seront créés avec notre package."]}],[{"l":"Configuration","p":["La configuration Nexus est un ensemble de paramètres qui sont applicables à l'ensemble des projets et qui permettent de contrôler certains comportements comme les environnements virtuels, les repos ou encore l'affichage de logs.","Pour voir l'ensemble des paramètres configurés, il suffit d'appeler la commande config","Les paramètres booléen: Qui sont modifiables simplement en donnant le nom du paramètre dans l'appel de la commande","Les paramètres à valeur: Qui sont modifiables en donnant le nom du paramètre suivi de la valeur souhaitée (en comptant que certains paramètres doivent être des nombres)"]},{"l":"Désactivation de paramètre","p":["Pour des besoins ponctuels, il est possible de désactiver ces paramètres avec l'argument --disable. Ces paramètres seront alors encore présent dans la configuration mais ne seront plus appliqué jusqu'à réactivation.","et de les réactiver avec l'argument --enable"]},{"l":"Recharger la configuration","p":["Dans le cas de configuration corrompue ou erronée, il est possible de recharger la configuration avec ces paramètres par défaut avec l'argument --reload"]},{"l":"Description des paramètres","p":["Ces paramètres sont regroupés en catégories (general, virtualenvs, logs, project, publish, repo). Chacun agit sur un ou plusieurs composants."]},{"l":"general","p":[": Défini l'emplacement du répertoire de cache: Configuration d'un proxy pour les commandes ayant besoin d'internet: Active l'utilisation de multi-thread pour les traitements: Défini le nombre maximum de thread parallèle"]},{"l":"virtualenvs","p":["Ces paramètres seront utilisés pour la création d'un environnement virtuel.",": Création d'un environnement virtuel au moment de la création ou de l'initialisation d'un projet: Nettoie le paramètre de l'environnement s'il existe déjà: Met à jour pip au moment de la création: Stocke l'environnement dans le projet (sinon dans le cache): Utilise des liens symboliques au lieu de copier les fichiers: Autorise l'utilisation des site-packages système: Nom du répertoire des environnements: Défini le modèle de prompt qui sera utilisé dans l'environnement"]},{"l":"logs","p":["Ces paramètres seront utilisés pour définir le niveau de logs souhaité.",": Affiche les logs de l'application: Affiche les logs détaillés: Ajoute la date dans les logs: Affiche les logs en version truecolor"]},{"l":"project","p":["Ces paramètres seront utilisés pour délimiter le comportement du projet.",": Alimentation d'un changelog en cas de changement de version: Niveau de recherche pour déterminer si on se trouve dans un projet"]},{"l":"publish","p":["Ces paramètres seront utilisés pour publier des packages sur un repo.",": URL du repo de package: Nom de l'utilisateur utilisé"]},{"l":"metadata","p":["Ces paramètres seront utilisés pour définir le comportement lors de la recherche de métadonnées sur un package.",": URL du repo sur lequel chercher les métadonnées"]},{"l":"repo","p":["Ces paramètres seront utilisés pour définir le comportement du repo de projet.",": Initialisation d'un repo en même temps que la création ou l'initialisation d'un projet: Défini le modèle de message qui sera utilisé pour les commit: Activation du changement de branche automatique en cas de changement de version du projet"]}],[{"l":"Project Management","p":["Nexus propose une solution complète pour gérer l'ensemble de son projet Python sans avoir besoin de basculer entre plusieurs solutions ou de modifier des fichiers de configuration non essentiel."]}],[{"i":"création-dun-projet","l":"Création d'un projet","p":["Nexus propose de créer très rapidement un nouveau projet qui se base sur la structure décrite dans la partie concept. Pour cela, on utilise la commande new","Plusieurs informations seront demandées:","Le nom du projet","La version d'origine","La description du projet","Le fichier principal","Le nom de l'auteur","Le nom du mainteneur","La licence choisie (les informations nécessaires à la création de la licence)","Les dépendances nécessaires","Certaines de ces informations comme maintainers ne sont pas obligatoire pour la création du projet.","Une fois les informations renseignées, le projet sera créé et les différents composants tels que l'environnement virtuel et le repo seront créés en fonction des paramètres configurés."]},{"l":"Options","p":["La majorité de ces options se retrouve dans la configuration Nexus met propose d'être dissocié et donc d'être appliqué uniquement sur la création de ce projet.","--env pour créer un environnement virtuel--noenv pour ne pas créer d'environnement virtuel--clear pour supprimer le répertoire de l'environnement si non vide--upgradepip pour mettre à jour pip au moment de la création--inproject pour placer l'environnement dans le répertoire du projet--incache pour placer l'environnement dans le répertoire de cache--envpath pour spécifier le répertoire de l'environnement--repo pour créer un repo dans le projet--norepo pour ne pas créer un repo dans le projet"]}],[{"l":"Initialisation à partir de code existant","p":["Dans le cas où vous avez déjà des projets existants, il est possible de le \"convertir\" en projet Nexus pour être géré par la suite par cette solution.","Plusieurs informations seront demandées:","Le nom du projet","La version d'origine","La description du projet","Le fichier principal","Le nom de l'auteur","Le nom du mainteneur","La licence choisie (les informations nécessaires à la création de la licence)","Certaines de ces informations comme maintainers ne sont pas obligatoire pour la création du projet. Le système va se baser sur un système d'analyse du code pour retrouver la liste des dépendances nécessaires.","Une fois les informations renseignées, le projet sera initialisé et les différents composants tels que l'environnement virtuel et le repo seront créés en fonction des paramètres configurés."]},{"l":"Options","p":["La majorité de ces options se retrouve dans la configuration Nexus met propose d'être dissocié et donc d'être appliqué uniquement sur la création de ce projet.","--env pour créer un environnement virtuel--noenv pour ne pas créer d'environnement virtuel--clear pour supprimer le répertoire de l'environnement si non vide--upgradepip pour mettre à jour pip au moment de la création--inproject pour placer l'environnement dans le répertoire du projet--incache pour placer l'environnement dans le répertoire de cache--envpath pour spécifier le répertoire de l'environnement--repo pour créer un repo dans le projet--norepo pour ne pas créer un repo dans le projet"]}],[{"l":"Versioning","p":["Nexus propose un système de versioning simplifié pour rapidement prendre en compte une version de package. Par défaut, la commande sans argument affichera la version actuelle du projet.","Plusieurs arguments sont possibles pour changer la version du projet actuelle:","Donner le nom de version souhaité","Spécifier l'alias (major, minor ou patch). Dans ce cas, le numéro de version sera calculé automatiquement En fonction de la configuration du projet, plusieurs autres actions seront réalisés.","Si un repo est configuré, une nouvelle branche sera créé avec la nouvelle version","Si le fichier de changelog est configuré, les informations seront demandés pour les ajouter au changelog"]}],[{"l":"Environment Management","p":["Nexus propose un système d'environnement virtuel. Un environnement virtuel Python est un espace isolé et autonome dans lequel vous pouvez installer des paquets, dépendances et versions spécifiques de Python pour un projet donné. Ce mécanisme vous permet de maintenir différentes configurations et dépendances de packages pour différents projets, sans interférer avec d'autres environnements Python.","Pour la création de ces environnements, l'outil utilise l'utilitaire virtualenv","L'exécution de la commande sans argument tentera d'ouvrir l'environnement virtuel par défaut","Pour travailler sur ces projets, Nexus va toujours regarder dans le fichier de configuration du projet si un environnement par défaut est configuré, si c'est le cas il lancera ces actions dessus, dans le cas contraire, il lancera ces actions sur le python racine."]}],[{"l":"Environnement par défaut","p":["Dans la majorité des commandes, Nexus tentera de retrouver dans le fichier de configuration du projet si un environnement par défaut est configuré, si c'est le cas il lancera ces actions dessus, dans le cas contraire, il lancera ces actions sur le python racine."]},{"l":"Définir en environnement par défaut","p":["L'argument --default permet de définir l'environnent par défaut."]},{"i":"désactiver-lenvironnement-par-défaut","l":"Désactiver l'environnement par défaut","p":["L'argument --disable supprime la mention par défaut sur un environnement."]}],[{"i":"création-dun-environnement","l":"Création d'un environnement","p":["Pour la création d'un environnement virtuel, nous utilisons l'argument env --create","Il faudra à minima préciser le nom de l'environnement","Dans la configuration Nexus, il existe des paramètres qui sont utilisés pour définir le comportement lors de la création des environnements","virtualenvs.create: Détermine si un environnement virtuel est créé lors de la création d'un projet Nexus virtualenvs.clear: Détermine si le dossier de l'environnement doit être nettoyer si non vide lors de la création virtualenvs.upgradepip: Détermine si pip doit être mis à jour lors de la création virtualenvs.in-project: Détermine si l'environnement doit être créé dans le répertoire du projet (sinon est créé dans le répertoire cache-dir) virtualenvs.symlinks: Détermine si l'environnement fait des liens symboliques ou copie les exécutables Python virtualenvs.system-site-packages: Détermine si l'environnement peut utiliser le site-packages du système virtualenvs.foldername: Détermine le nom du répertoire des environnements virtuels"]},{"l":"Options","p":["-d ou --default pour définir ce nouvel environnement comme l'environnement par défaut--withoutdeps pour définir si les dépendances du projet doit être installés au moment de la création de l'environnement--clear pour définir si le dossier de l'environnement doit être nettoyer si non vide lors de la création-C ou --cache pour forcer la création de l'environnement dans le dossier de cache-p ou --prompt pour définir le prompt dans l'environnement"]}],[{"l":"Sandbox","p":["Pour réaliser des tests sur l'instant, Nexus propose la création de sandbox qui sont créée en direct et qui sont supprimées lors de la sortie de l'environnement.","Cet environnement fonctionne comme un environnement classique. Il est possible d'installer/supprimer des packages, exécuter des commandes ou encore ouvrir un prompt."]}],[{"l":"Ajouter un environnement existant","p":["Il est possible d'assigner un environnement existant à un projet","Il faudra à minima préciser le chemin vers l'environnement"]},{"l":"Options","p":["--name définie le nom de l'environnement-d ou --default pour définir ce nouvel environnement comme l'environnement par défaut"]}],[{"l":"Cloner un environnement","p":["Il est possible de cloner un environnement virtuel existant avec l'ensemble des paramètres et dépendances de celui-ci","Il faudra préciser le nom de l'environnement existant et le nom du nouvel environnement."]}],[{"i":"migration-denvironnement","l":"Migration d'environnement","p":["Il est possible de migrer un environnement virtuel du cache vers le projet ou inversement","Il faudra à minima préciser le nom de l'environnement"]},{"l":"Options","p":["-D ou --dest définie le chemin de destination de l'environnement"]}],[{"l":"Lister les environnements","p":["Il est possible de lister les environnements virtuels d'un projet avec l'argument --list","La commande nous affichera la liste des venv mais également si c'est un environnement par défaut, s'il est stocké dans le cache ou encore si les fichiers de l'environnement n'existe plus"]}],[{"l":"Supprimer un environnement","p":["Il est possible de supprimer un environnement virtuel d'un projet. Dans ce cas, le projet sera supprimé du fichier de configuration du projet et les fichiers de l'environnement seront effacés.","Il faudra à minima préciser le nom de l'environnement"]}],[{"l":"Travail dans un environnement","p":["Il existe plusieurs solutions pour travailler dans un environnement virtuel, ouvrir un environnement, ouvrir le prompt Python ou encore exécuter une commande dans l'environnement.","Entrer dans un environnement virtuel Python signifie configurer votre terminal ou votre invite de commande pour utiliser l'installation Python et les dépendances spécifiques à cet environnement virtuel. Cela isole l'environnement virtuel, garantissant que les commandes Python et les exécutions de scripts utilisent les packages installés dans cet environnement spécifique."]},{"l":"Entrer dans un environnement","p":["Deux méthodes, utiliser la commande nxs env sans aucun paramètre ouvrira l'environnement par défaut","Pour entrer dans un environnement spécifique, il faudra utiliser l'argument --open"]},{"l":"Ouvrir le prompt Python","p":["La commande shell va permettre d'ouvrir directement le prompt Python de l'environnement virtuel sans passer par la phase d'entrée dans l'environnement.","Sans paramètre, la commande va ouvrir l'environnement par défaut Pour ouvrir un shell d'un environnement spécifique, il faudra utiliser l'argument -e ou --env"]},{"l":"Exécuter une commande ou script","p":["Nexus propose d'exécuter une commande directement dans un environnement sans l'ouvrir.","Il est également possible d'exécuter un fichier .py"]},{"l":"Options","p":["Par défaut, la commande utilisera l'environnement par défaut. Pour utiliser un environnement spécifique, il faudra utiliser l'argument -e ou --env","Pour faciliter les tests, il est possible de définir des paramètres qui seront utilisés lors de l'exécution par la commande --set","Ces paramètres seront stockés dans le fichier du projet et seront utilisés au lancement de la commande run","Il est également possible de dissocier les exécutions de test (avec --test) et de prod (avec --prod) pour permettre de réaliser différents tests rapidement","Pour contrôler les temps d'exécutions, l'option -T ou --time permet d'afficher le temps de la commande ou du script"]}],[{"l":"Package Management","p":["La partie gestion des packages est l'élément le plus important dans la création du projet. C'est grâce à ces composants que nous pourrons installer/supprimer/mettre à jour nos dépendances pour garantir que nos projets fonctionneront correctement et qu'ils pourront être compilés pour les rendre portable. En plus de cela, Nexus propose un système qui va garantir la compatibilité entre chaque package installé pour s'assurer d'avoir le maximum de stabilité et pour limiter les conflits de code."]}],[{"l":"Packaging","p":["Nexus propose un système pour faire un package du projet en cours en .whl et/ou .tar.gz pour ensuite être publié sur les repo.","Une fois la commande lancée, la système va réaliser un package et le placer dans le répertoire dist du projet."]},{"l":"Options","p":["--windows pour créer un package pour Windows--linux pour créer un package pour Linux--sdist pour créer un package .tar.gz--d ou --dryrun pour afficher les informations de packaging sans action"]}],[{"l":"Publication","p":["Nexus propose une solution pour publier ces packages sur le repo de notre choix (par défaut pypi.org)"]},{"l":"Options","p":["--url permet de préciser l'url du repo cible","Une autre méthode pour définir le repo cible est de changer le paramètre publish.url dans la configuration Nexus. Il est également possible de paramétrer le compte qui publie avec le paramètre publish.username dans la configuration Nexus."]}],[{"l":"Provisioning","p":["Dans la majorité des repo Python, il est d'usage d'associer un nom de package au profil de son propriétaire. C'est-à-dire que seul celui-ci pourra ajouter ou mettre à jour un package portant ce nom, même si ce même package est supprimé de son profil par l'utilisateur. Il est donc important de toujours s'assurer que notre nom de package que nous créons est disponible sur le repo souhaité et qu'il le restera pendant le développement de celui-ci. Pour faciliter cela, Nexus propose une solution qui va provisionner notre nom de package sur notre profil pour éviter de le voir utilisé par un autre utilisateur entre temps.","Nexus va alors créé un petit package vide, portant la version 0.0.0 et va le publier sur notre profil pour réserver le nom. Il est possible de préciser l'url du repo avec l'argument --url"]}],[{"l":"Compilation","p":["Nexus propose un système de compilation basé sur une intégration de cx_freeze grâce à ma commande compile","Les options de compilation sont à retrouver dans le fichier nexus.toml","Avant la compilation, le système va contrôler la présence de toutes les dépendances et leur compatibilité."]},{"l":"Options","p":["--install pour installer ou mettre à jour les dépendances manquantes--nocheck pour désactiver la vérification du contrôle de dépendances--dryrun pour afficher les informations de compilation sans action-e ou --env pour préciser l'environnement qui sera utilisé pour la compilation"]}],[{"l":"Code analysis","p":["Nexus propose différentes solutions pour analyser, mettre en forme et faire des vérifications de conformité et de sécurité sur nos projets. Ces options sont regroupés en 3 commandes analyse, securiscan et clearcode"]}],[{"l":"Analyse","p":["La commande analyse est une intégration de l'outil pylint qui permet d'analyser le code dans le but de déterminer la qualité du code et de proposer des axes d'améliorations pour se rapprocher des recommandations PEP. L'analyse va alors nous ressortir la liste des éléments à modifier dans notre code, ainsi qu'une note sur 10 qui sera base en fonction du nombre de problème à corriger."]},{"l":"Options","p":["-e ou --exclude permet d'exclure de l'analyse certains composants. Par exemple, E0602 pour les undefined variable","-n ou --onlynote permet d'afficher uniquement la note","-r ou --onlyreport permet d'afficher uniquement les choses à modifier (sans la note)","--recursive permet d'analyser les fichiers .py qui se trouve dans les répertoires. Cela rendra l'analyse plus longue mais plus complète dans le cas de code complexe."]}],[{"l":"Securiscan","p":["La commande securiscan est une intégration de l'outil Bandit qui permet de détecter les problèmes de sécurité courants. Cette option ne remplace pas un réel outil d'analyse de la sécurité de votre code mais propose une premier niveau d'analyse durant votre développement.","Suite à l'analyse, la commande retournera différents niveaux de détails sur les erreurs à corriger tels que le nom du fichier, le niveau de criticité, l'emplacement de l'erreur ou encore des liens vers les informations détaillées sur la faille ciblée."]},{"l":"Options","p":["-e ou --errors affichera les erreurs d'analyse","-g ou --globalmetric affichera les totales des métriques suite à l'analyse. Par exemple, le nombre de faille HIGH, MEDIUM ou LOW","-f ou --filemetric affichera les métriques par fichier.","-m ou --allmetric affichera l'ensemble des métriques.","-d ou --details affichera le détail des résultats comme les erreurs à corriger tels que le nom du fichier, le niveau de criticité, l'emplacement de l'erreur ou encore des liens vers les informations détaillées sur la faille ciblée.","-a ou --all affichera l'ensemble des informations.","-r ou --recursive permet d'analyser les fichiers .py qui se trouve dans les répertoires. Cela rendra l'analyse plus longue mais plus complète dans le cas de code complexe.","-E ou --exclude permet d'exclure certains fichiers de l'analyse","-s ou --severity permet de filtrer par niveau de severity 1: LOW, 2: MEDIUM, 3: HIGH","-c ou --confidence permet de filtrer par niveau de confidence 1: LOW, 2: MEDIUM, 3: HIGH"]}],[{"l":"Clearcode","p":["La commande clearcode est une intégration de l'outil Black qui permet d'analyser et de corriger le formatage du code.","Par défaut, la commande va analyser l'ensemble des fichiers .py se trouvant dans le répertoire courant et retourner les modifications dans le prompt. Il est possible de préciser un ou plusieurs fichiers en particulier pour l'analyse."]},{"l":"Options","p":["--apply permet d'appliquer les modifications directement sur les fichiers analysés Cela permettra de corriger le formatage du code sans étape intermédiaire.","--output permet de spécifier un fichier de sortie. Les fichiers modifiés seront alors placés dans un autre fichier pour permettre une analyse plus simple des modifications.","-r ou --recursive permet d'analyser les fichiers .py qui se trouve dans les répertoires. Cela rendra l'analyse plus longue mais plus complète dans le cas de code complexe.","--fast permet de faire une analyse rapide du code, qui sera moins précise qu'une analyse complète, mais qui prendra beaucoup moins de temps sur des volumes de code conséquents."]}]]